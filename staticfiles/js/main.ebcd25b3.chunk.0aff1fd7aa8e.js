(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(11),s=n.n(o),r=n(10),i=n(26),l=n(169),d=n(218),u=n(236),j=n(14),b=n(221),h=n(48),p=n(214),m=n(216),O=n(82),x=n.n(O),f=n(108),g=n(109),v="https://aakogako.herokuapp.com/api/v1/",y=n.n(g).a.create({baseURL:v,timeout:5e3,withCredentials:!0,headers:{"Content-Type":"application/json",accept:"application/json"}});y.interceptors.response.use((function(e){return e}),function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"undefined"!=typeof t.response){e.next=4;break}return alert("A server/network error occoured."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||n.url!==v+"auth/token/refresh/"){e.next=9;break}return window.location.pathname="/logout",e.abrupt("return",Promise.reject(t));case 9:if(n.url===v+"auth/token/refresh/"||401!==t.response.status){e.next=11;break}return e.abrupt("return",y.post("auth/token/refresh/").then((function(e){return localStorage.setItem("access_token",e.data.access_token),y(n)})).catch((function(e){alert("Session Expired Please Login Again."),window.location.pathname="/logout"})));case 11:return e.abrupt("return",Promise.reject(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var w=y,k=n(16),C=n(13),S=function(e){return{type:"INSERT_USER",payload:e}},N=n(220),_=n(72),E=n(1),T=function(e){var t=e.message,n=e.type;return Object(E.jsxs)("div",{className:"alert alert-".concat(n," alert-dismissible fade show"),role:"alert",children:[t,Object(E.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(E.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})},D=Object(p.a)((function(e){return{buttonProgress:{color:_.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonWrapper:{margin:e.spacing(1),position:"relative"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function R(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(k.b)(),s=Object(C.g)(),p=D(),O=Object(a.useState)(!1),x=Object(r.a)(O,2),f=x[0],g=x[1],v=Object(a.useState)(!1),y=Object(r.a)(v,2),_=(y[0],y[1]),R=Object(i.a)({initialValues:{username:"",password:""},onSubmit:function(e){g(!0),console.log(e),w.post("auth/login/",e,{withCredentials:!0}).then((function(e){console.clear(),localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("user",JSON.stringify(e.data.user)),o({type:"TRUE"}),o(S(e.data.user)),s.push("/accounts"),_(!0)})).catch((function(e){_(!1),c([{message:e.response.data.non_field_errors[0],type:"danger"}])})).finally((function(){return g(!1)}))}});return Object(E.jsxs)(m.a,{component:"main",maxWidth:"xs",children:[Object(E.jsx)(d.a,{}),Object(E.jsxs)("div",{className:p.paper,children:[Object(E.jsx)(h.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(E.jsxs)("form",{className:p.form,onSubmit:R.handleSubmit,children:[Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",onChange:R.handleChange,value:R.values.username,autoFocus:!0}),Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:R.handleChange,value:R.values.password}),Object(E.jsxs)("div",{className:p.buttonWrapper,children:[Object(E.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:f,className:p.submit,children:"Sign In"}),f&&Object(E.jsx)(N.a,{size:24,className:p.buttonProgress})]}),Object(E.jsxs)(b.a,{container:!0,children:[Object(E.jsx)(b.a,{item:!0,xs:!0,children:Object(E.jsx)(j.b,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(E.jsx)(b.a,{item:!0,children:Object(E.jsx)(j.b,{to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),n.map((function(e){return Object(E.jsx)(T,{message:e.message,type:e.type})}))]})}var I=function(){var e=Object(k.b)();return Object(a.useEffect)((function(){w.post("auth/logout/").then((function(t){localStorage.removeItem("access_token"),localStorage.removeItem("user"),e({type:"FALSE"}),e(S({})),e({type:"REMOVE_BOOKS",payload:{}})}))}),[]),Object(E.jsxs)("div",{className:"white-container",style:{padding:"2vh 5vw",margin:"2vh"},children:[Object(E.jsx)("h1",{children:"You are Logged Out!"}),Object(E.jsx)("hr",{}),Object(E.jsx)(j.b,{to:"/login",children:"Log in again?"})]})},W=n(23),A=n(36),B=n(240),F=n(237),P=n(115),L=n.n(P);function U(){var e=Object(C.g)(),t=Object.freeze({email:"",username:"",password1:"",password2:""}),n=Object(a.useState)([]),c=Object(r.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(!1),O=Object(r.a)(i,2),x=O[0],f=O[1],g=Object(a.useState)(!1),v=Object(r.a)(g,2),y=(v[0],v[1]),k=Object(a.useState)(t),S=Object(r.a)(k,2),D=S[0],R=S[1],I=function(e){R(Object(A.a)(Object(A.a)({},D),{},Object(W.a)({},e.target.name,e.target.value.trim())))},P=Object(p.a)((function(e){return{buttonProgress:{color:_.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonWrapper:{margin:e.spacing(1),position:"relative"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}))();return Object(E.jsxs)(m.a,{component:"main",maxWidth:"xs",children:[Object(E.jsxs)("div",{className:"white-container",children:[Object(E.jsx)(d.a,{}),Object(E.jsxs)("div",{className:P.paper,children:[Object(E.jsx)(B.a,{className:P.avatar,children:Object(E.jsx)(L.a,{})}),Object(E.jsx)(h.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(E.jsxs)("form",{className:P.form,noValidate:!0,children:[Object(E.jsxs)(b.a,{container:!0,spacing:2,children:[Object(E.jsx)(b.a,{item:!0,xs:12,children:Object(E.jsx)(u.a,{autoComplete:"username",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",autoFocus:!0,onChange:function(e){return I(e)}})}),Object(E.jsx)(b.a,{item:!0,xs:12,children:Object(E.jsx)(u.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){return I(e)}})}),Object(E.jsx)(b.a,{item:!0,xs:12,children:Object(E.jsx)(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password1",label:"Password",type:"password",id:"password1",autoComplete:"current-password1",onChange:function(e){return I(e)}})}),Object(E.jsx)(b.a,{item:!0,xs:12,children:Object(E.jsx)(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password2",label:"Confirm Password",type:"password",id:"password2",autoComplete:"current-password2",onChange:function(e){return I(e)}})})]}),Object(E.jsxs)("div",{className:P.buttonWrapper,children:[Object(E.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:P.submit,disabled:x,onClick:function(t){return function(t){t.preventDefault(),f(!0),w.post("auth/register/",D).then((function(t){y(!0),e.push("/login")})).catch((function(e){y(!1),console.log(e);var t=Object.entries(e.response.data)[0][1];s([{message:t,type:"warning"}])})).finally((function(){return f(!1)}))}(t)},children:"Sign Up"}),x&&Object(E.jsx)(N.a,{size:24,className:P.buttonProgress})]}),Object(E.jsx)(b.a,{container:!0,justify:"flex-end",children:Object(E.jsx)(b.a,{item:!0,children:Object(E.jsx)(j.b,{to:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(E.jsx)(F.a,{mt:5})]}),o.map((function(e){return Object(E.jsx)(T,{message:e.message,type:e.type})}))]})}var V=n(121),M=["component"],q=function(e){var t=e.component,n=Object(V.a)(e,M);return Object(E.jsx)(C.b,Object(A.a)(Object(A.a)({},n),{},{render:function(e){return localStorage.getItem("access_token")?Object(E.jsx)(t,Object(A.a)({},e)):Object(E.jsx)(C.a,{to:{pathname:"login/",state:{from:e.location}}})}}))},K=(n(166),function(e){var t=e.id,n=e.title,a=e.balance,c="accounts/".concat(t);return Object(E.jsxs)(j.b,{className:"book-div",to:c,children:[Object(E.jsx)("div",{className:"title",children:n}),Object(E.jsx)("div",{className:"balance",children:a})]})}),z=n(70),Y=n.n(z);function J(){var e=Object(k.c)((function(e){return e.authenticated})),t=Object(k.b)();c.a.useEffect((function(){e&&w.get("account-books/").then((function(e){t({type:"INSERT_BOOKS",payload:e.data})})).catch((function(e){return console.log(e)}))}),[])}var X=function(){J();var e=Object(C.g)(),t=Object(k.c)((function(e){return e.account_books}));return Object(E.jsxs)("div",{className:"container mt-4",children:[Object(E.jsx)("h3",{children:"Your Account Books:"}),Object(E.jsx)("hr",{}),Object(E.jsx)("div",{className:"books",children:t.map((function(e){return Object(E.jsx)(K,{id:e.id,title:e.title,balance:e.balance},e.id)}))}),Object(E.jsx)("div",{className:"add-account-div",children:Object(E.jsxs)(l.a,{variant:"contained",color:"primary",onClick:function(){return e.push("/create-account-book")},children:[Object(E.jsx)(Y.a,{}),"Add New Account book"]})})]})},G=function(){J();var e=Object(C.g)(),t=Object(k.c)((function(e){return e.account_books}));return Object(E.jsxs)("div",{className:"container mt-4",children:[Object(E.jsx)("h3",{children:"Your Account Books:"}),Object(E.jsx)("hr",{}),Object(E.jsx)("div",{className:"books",children:t.map((function(t){return Object(E.jsxs)("div",{className:"management-container",children:[Object(E.jsx)(K,{id:t.id,title:t.title,balance:t.balance},t.id),Object(E.jsx)("div",{className:"btn-group",children:Object(E.jsx)("button",{account_book:t.id,className:"btn btn-outline-info",onClick:function(){return e.push("/manage/accounts/".concat(t.id))},children:"Edit"})})]})}))}),Object(E.jsx)("div",{className:"add-account-div",children:Object(E.jsxs)(l.a,{variant:"contained",color:"primary",onClick:function(){return e.push("/create-account-book")},children:[Object(E.jsx)(Y.a,{}),"Add New Account book"]})})]})},H=function(){var e=Object(C.g)(),t=Object(i.a)({initialValues:{title:""},onSubmit:function(t){console.log(t),w.post("account-books/",t,{withCredentials:!0}).then((function(t){e.push("/accounts")})).catch((function(e){console.log(e)}))}});return Object(E.jsxs)("div",{className:"container mt-3",children:[Object(E.jsx)("h1",{children:"Create Account book"}),Object(E.jsx)("hr",{}),Object(E.jsxs)("form",{action:"",method:"post",className:"container mt-4 pt-4",onSubmit:t.handleSubmit,children:[Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Title",name:"title",onChange:t.handleChange,value:t.values.title,autoFocus:!0}),Object(E.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Create"})]})]})},Q=n(17),Z=n(226),$=n(227),ee=n(228),te=n(225),ne=n(120),ae=n(118),ce=n.n(ae),oe=n(119),se=n.n(oe),re=n(4),ie=n(239),le=n(219),de=n(223),ue=n(170),je=n(222),be=n(224),he=n(117),pe=n.n(he),me=n(116),Oe=n.n(me),xe=Object(p.a)((function(e){var t;return{list:{width:250},fullList:{width:"auto"},grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={display:"block",color:"white"},Object(W.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(W.a)(t,"&:hover",{textDecoration:"none",color:"#f0f6db"}),t),search:Object(W.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Q.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Q.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),inputRoot:{color:"inherit"},inputInput:Object(W.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(W.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(W.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function fe(){var e=Object(k.c)((function(e){return e.account_books})),t=Object(k.c)((function(e){return e.user.username})),n=Object(k.c)((function(e){return e.authenticated})),a=c.a.useState({left:!1}),o=Object(r.a)(a,2),s=o[0],i=o[1],d=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&i(Object(A.a)(Object(A.a)({},s),{},Object(W.a)({},e,t)))}},u=xe(),b=c.a.useState(null),p=Object(r.a)(b,2),m=p[0],O=p[1],x=Boolean(m),f="primary-search-account-menu",g=n?Object(E.jsx)("div",{children:Object(E.jsxs)(ne.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:f,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:function(){O(null)},children:[Object(E.jsx)(te.a,{component:j.b,to:"/profile",children:"My account"}),Object(E.jsx)(te.a,{component:j.b,to:"/logout",children:"Logout"})]})}):"",v="left";return Object(E.jsxs)("div",{className:u.grow,children:[Object(E.jsx)(Z.a,{position:"static",children:Object(E.jsxs)($.a,{children:[n?Object(E.jsx)(l.a,{onClick:d(v,!0),children:Object(E.jsx)(ce.a,{})}):"",Object(E.jsx)(ie.a,{anchor:v,open:s.left,onClose:d(v,!1),children:function(n){return Object(E.jsxs)("div",{className:Object(re.a)(u.list,Object(W.a)({},u.fullList,"top"===n||"bottom"===n)),role:"presentation",onClick:d(n,!1),onKeyDown:d(n,!1),children:[Object(E.jsx)(le.a,{children:Object(E.jsx)(ue.a,{button:!0,children:Object(E.jsxs)(je.a,{children:[Object(E.jsx)(Oe.a,{fontSize:"large"}),Object(E.jsxs)("h4",{children:[" @",t]})]})})}),Object(E.jsx)(de.a,{}),Object(E.jsxs)(le.a,{children:[Object(E.jsx)(ue.a,{button:!0,component:j.b,to:"/accounts",children:Object(E.jsx)(je.a,{children:Object(E.jsx)("h6",{children:"My Account Books"})})}),Object(E.jsx)(de.a,{}),e.map((function(e){return Object(E.jsxs)(ue.a,{button:!0,component:j.b,to:"/accounts/".concat(e.id),children:[Object(E.jsx)(je.a,{children:Object(E.jsx)(pe.a,{})}),Object(E.jsx)(be.a,{primary:e.title})]},e.id)})),Object(E.jsx)(de.a,{}),Object(E.jsx)(ue.a,{button:!0,component:j.b,to:"/manage/accounts",children:Object(E.jsx)(je.a,{children:Object(E.jsx)("h6",{children:"Manage My Books"})})}),Object(E.jsx)(de.a,{})]})]})}(v)}),Object(E.jsx)(h.a,{className:u.title,variant:"h6",noWrap:!0,component:j.b,to:"/accounts",children:"Expense Tracker"}),Object(E.jsx)("div",{className:u.grow}),Object(E.jsx)("div",{children:n?Object(E.jsx)(ee.a,{edge:"end","aria-label":"account of current user","aria-controls":f,"aria-haspopup":"true",onClick:function(e){O(e.currentTarget)},color:"inherit",children:Object(E.jsx)(se.a,{})}):""})]})}),g]})}var ge=n(229),ve=Object(p.a)((function(e){return{footer:Object(W.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));function ye(){return Object(E.jsxs)(h.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(E.jsx)(ge.a,{color:"inherit",href:"https://nischalstha9.github.io.com/",children:"Nischal Shrestha"})," ",(new Date).getFullYear(),"."]})}var we=[{title:"Company",description:["Team","History","Contact us","Locations"]},{title:"Features",description:["Cool stuff","Random feature","Team feature","Developer stuff","Another one"]},{title:"Resources",description:["Resource","Resource name","Another resource","Final resource"]},{title:"Legal",description:["Privacy policy","Terms of use"]}];var ke=function(){var e=ve();return Object(E.jsx)(c.a.Fragment,{children:Object(E.jsxs)(m.a,{maxWidth:"md",component:"footer",className:e.footer,children:[Object(E.jsx)(b.a,{container:!0,spacing:4,justify:"space-evenly",children:we.map((function(e){return Object(E.jsxs)(b.a,{item:!0,xs:6,sm:3,children:[Object(E.jsx)(h.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:e.title}),Object(E.jsx)("ul",{children:e.description.map((function(e){return Object(E.jsx)("li",{children:Object(E.jsx)(ge.a,{href:"#",variant:"subtitle1",color:"textSecondary",children:e})},e)}))})]},e.title)}))}),Object(E.jsx)(F.a,{mt:5,children:Object(E.jsx)(ye,{})})]})})},Ce=n(230),Se=n(233),Ne=n(232),_e=n(231);function Ee(e){var t=e.account_book,n=e.trans_id,a=e.description,o=e.amount,s=e.refreshForm,d=c.a.useState(!1),j=Object(r.a)(d,2),b=j[0],h=j[1],p=function(){m.handleReset(),h(!1)},m=Object(i.a)({initialValues:{description:a,amount:o},onSubmit:function(e){w.patch("account-books/".concat(t,"/transactions/").concat(n,"/"),e,{withCredentials:!0}).then((function(e){console.log(e),p(),s()})).catch((function(e){return console.log(e)}))}});return Object(E.jsxs)("div",{children:[Object(E.jsx)(l.a,{variant:"outlined",color:"primary",onClick:function(){h(!0)},children:"Edit"}),Object(E.jsxs)(Ce.a,{open:b,onClose:p,"aria-labelledby":"form-dialog-title",children:[Object(E.jsx)(_e.a,{id:"form-dialog-title",children:"Edit Transaction"}),Object(E.jsxs)("form",{action:"",onSubmit:m.handleSubmit,children:[Object(E.jsxs)(Ne.a,{children:[Object(E.jsx)(u.a,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,onChange:m.handleChange,value:m.values.description,placeholder:"Description"}),Object(E.jsx)(u.a,{margin:"dense",id:"amount",label:"Amount",type:"number",fullWidth:!0,onChange:m.handleChange,value:m.values.amount})]}),Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(l.a,{onClick:p,color:"primary",children:"Cancel"}),Object(E.jsx)(l.a,{onClick:function(){w.delete("account-books/".concat(t,"/transactions/").concat(n,"/"),{withCredentials:!0}).then((function(e){console.log(e),p(),s()})).catch((function(e){return console.log(e)}))},color:"primary",children:"Delete"}),Object(E.jsx)(l.a,{onClick:m.handleSubmit,color:"primary",children:"Update"})]})]})]})]})}var Te=function(e){var t=e.tran,n=e.account_book,a=e.RefreshFrom,c="DEBIT"===t._type?"table-success":"table-danger";return Object(E.jsxs)("tr",{className:c,id:t.id,children:[Object(E.jsx)("th",{scope:"row",children:t.date}),Object(E.jsx)("td",{children:t.description}),Object(E.jsx)("td",{children:t.amount}),Object(E.jsx)("td",{children:Object(E.jsx)("div",{className:"btn-group btn-group-small",children:Object(E.jsx)(Ee,{account_book:n,trans_id:t.id,description:t.description,amount:t.amount,refreshForm:a})})})]},t.id)};function De(e){var t=e.account_book,n=e._type,a=e.refreshForm,o=c.a.useState(!1),s=Object(r.a)(o,2),d=s[0],j=s[1],b=function(){h.handleReset(),j(!1)},h=Object(i.a)({initialValues:{description:"",amount:0,_type:n},onSubmit:function(e){w.post("account-books/".concat(t,"/transactions/"),e,{withCredentials:!0}).then((function(e){b(),a()})).catch((function(e){return console.log(e)}))}});return Object(E.jsxs)("div",{children:[Object(E.jsx)(l.a,{variant:"outlined",color:"primary",onClick:function(){j(!0)},children:"DEBIT"===n?"Add Income":"Add Expense"}),Object(E.jsxs)(Ce.a,{open:d,onClose:b,"aria-labelledby":"form-dialog-title",children:[Object(E.jsxs)(_e.a,{id:"form-dialog-title",children:["Add ","DEBIT"===n?"Income":"Expense"," Transaction"]}),Object(E.jsxs)("form",{action:"",onSubmit:h.handleSubmit,children:[Object(E.jsxs)(Ne.a,{children:[Object(E.jsx)(u.a,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,onChange:h.handleChange,value:h.values.description,placeholder:"Description"}),Object(E.jsx)(u.a,{margin:"dense",id:"amount",label:"Amount",type:"number",fullWidth:!0,onChange:h.handleChange,value:h.values.amount})]}),Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(l.a,{onClick:b,color:"primary",children:"Cancel"}),Object(E.jsx)(l.a,{onClick:h.handleSubmit,color:"primary",children:"DEBIT"===n?"Add Income":"Add Expense"})]})]})]})]})}var Re=n(238),Ie=n(234),We=function(){var e=Object(C.h)().account_id,t=Object(a.useState)([]),n=Object(r.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),i=Object(r.a)(s,2),l=i[0],d=i[1],u=Object(a.useState)(""),j=Object(r.a)(u,2),b=j[0],h=j[1],p=Object(a.useState)(1),m=Object(r.a)(p,2),O=m[0],x=m[1],f=Object(a.useState)(1),g=Object(r.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(""),S=Object(r.a)(k,2),N=S[0],_=S[1],T=Object(a.useState)(""),D=Object(r.a)(T,2),R=D[0],I=D[1],W=Object(a.useState)(""),A=Object(r.a)(W,2),B=A[0],F=A[1],P=Object(a.useState)(0),L=Object(r.a)(P,2),U=L[0],V=L[1],M="account-books/".concat(e,"/transactions/?page=").concat(O,"&_type=").concat(b,"&search=").concat(N,"&date__gte=").concat(R,"&date__lte=").concat(B),q=function(){V(U+1)};return Object(a.useEffect)((function(){x(1),h(""),I(""),F("")}),[e]),Object(a.useEffect)((function(){w.get("account-books/".concat(e,"/")).then((function(e){d(e.data)})).catch((function(e){return console.log(e)}))}),[U,e]),Object(a.useEffect)((function(){w.get(M).then((function(e){y(Math.ceil(e.data.count/10)),o(e.data.results)})).catch((function(e){return console.log(e)}))}),[M,U,e]),Object(E.jsxs)("div",{className:"container mt-4",children:[Object(E.jsxs)("h4",{children:["Title: ",l.title]}),Object(E.jsxs)("h4",{children:["Balance: Rs.",Object(E.jsxs)("span",{id:"balance_amt",className:"text-success",children:[" ",l.balance]}),"/-"]}),Object(E.jsx)("hr",{}),Object(E.jsx)("form",{action:"",method:"get",id:"filter-form",className:"form-control",onSubmit:function(e){return e.preventDefault()},children:Object(E.jsxs)("div",{className:"form-row",children:[Object(E.jsxs)("div",{className:"form-group col-md-4",children:[Object(E.jsx)("label",{htmlFor:"inputState",children:Object(E.jsx)("h6",{children:"Type:"})}),Object(E.jsxs)("select",{className:"custom-select",id:"Transasction_Filter",onChange:function(e){x(1),h(e.target.value)},children:[Object(E.jsx)("option",{value:"",children:"All Transactions"}),Object(E.jsx)("option",{value:"DEBIT",children:"Income"}),Object(E.jsx)("option",{value:"CREDIT",children:"Expenses"})]})]}),Object(E.jsxs)("div",{className:"form-group col-md-4",children:[Object(E.jsx)("label",{htmlFor:"sdate-filter",children:Object(E.jsx)("h6",{children:"Start Date:"})}),Object(E.jsx)("input",{type:"date",autoComplete:"false",className:"form-control",id:"sdate-filter",onChange:function(e){x(1),I("".concat(e.target.value,"T00:00:00"))}})]}),Object(E.jsxs)("div",{className:"form-group col-md-4",children:[Object(E.jsx)("label",{htmlFor:"edate-filter",children:Object(E.jsx)("h6",{children:"End Date:"})}),Object(E.jsx)("input",{type:"date",autoComplete:"false",className:"form-control",id:"edate-filter",onChange:function(e){x(1),F("".concat(e.target.value,"T00:00:00"))}})]}),Object(E.jsx)("div",{className:"form-group col-md-4",children:Object(E.jsx)("input",{type:"text",autoComplete:"false",className:"form-control",id:"search-filter",placeholder:"Search By Description",onKeyUp:function(e){"Enter"===e.code&&(x(1),_(e.target.value))}})}),Object(E.jsx)("div",{className:"",children:Object(E.jsx)("button",{type:"reset",autoComplete:"false",className:"btn btn-secondary",id:"clear-filter",onClick:function(e){F(""),I(""),_(""),h("")},children:"clear"})}),Object(E.jsx)("div",{className:"row mx-2",children:Object(E.jsxs)(Ie.a,{children:[Object(E.jsx)(De,{account_book:e,_type:"DEBIT",refreshForm:q}),Object(E.jsx)(De,{account_book:e,_type:"CREDIT",refreshForm:q})]})})]})}),Object(E.jsx)("hr",{}),Object(E.jsxs)("table",{className:"table",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{scope:"col",className:"bg-white sticky-top",children:"Date"}),Object(E.jsx)("th",{scope:"col",className:"bg-white col-6 sticky-top",children:"Description"}),Object(E.jsx)("th",{scope:"col",className:"bg-white sticky-top",children:"Amount"}),Object(E.jsx)("th",{scope:"col",className:"bg-white sticky-top",children:"Action"})]})}),Object(E.jsx)("tbody",{id:"tbody",children:c.map((function(t){return Object(E.jsx)(Te,{tran:t,account_book:e,RefreshFrom:q},t.id)}))})]}),v>1?Object(E.jsx)(Re.a,{count:v,color:"primary",onChange:function(e,t){return x(t)},page:O}):""]})},Ae=n(235);function Be(){var e=Object(C.g)(),t=Object(a.useState)({}),n=Object(r.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),l=Object(r.a)(s,2),d=l[0],j=l[1],b=Object(C.h)().account_id;Object(a.useEffect)((function(){w.patch("account-books/".concat(b,"/"),{withCredentials:!0}).then((function(e){console.log(e),o(e.data),console.log(c)})).catch((function(e){return console.log(e)}))}),[]);var h=Object(i.a)({initialValues:{title:c.title},onSubmit:function(t){w.patch("account-books/".concat(c.id,"/"),t,{withCredentials:!0}).then((function(t){e.push("/manage/accounts")})).catch((function(e){return console.log(e)}))}}),p=Object(i.a)({initialValues:{password:""},onSubmit:function(t){console.log(t),w.delete("account-books/".concat(c.id,"/"),{data:t},{withCredentials:!0}).then((function(t){e.push("/manage/accounts")})).catch((function(e){var t=Object.entries(e.response.data)[0][1];console.log(t),j([{message:t,type:"danger"}])}))}});return Object(E.jsxs)("div",{className:"container mt-3",children:[Object(E.jsxs)("div",{className:"jumbotron",children:[Object(E.jsxs)("h3",{children:['Update Book "',c.title,'"']}),Object(E.jsx)("hr",{}),Object(E.jsx)(_e.a,{id:"form-dialog-title",children:"Title:"}),Object(E.jsxs)(Ne.a,{children:[Object(E.jsx)(u.a,{autoFocus:!0,margin:"dense",id:"title",label:"Title",type:"text",fullWidth:!0,onChange:h.handleChange,value:h.values.title,placeholder:"Title"}),Object(E.jsx)("button",{className:"btn btn-warning mt-3",onClick:h.handleSubmit,children:"Update"})]})]}),Object(E.jsxs)("div",{className:"",children:[Object(E.jsxs)("h3",{children:['Delete Book "',c.title,'"']}),Object(E.jsx)("hr",{}),Object(E.jsxs)(_e.a,{id:"form-dialog-title",children:['Confirm Delete Account Book: "',c.title,'"']}),Object(E.jsxs)("form",{action:"",onSubmit:p.handleSubmit,children:[Object(E.jsxs)(Ne.a,{children:[Object(E.jsx)(Ae.a,{children:"Deleting Account Book will delete all of your transactions in respective account book. This action is irreversible. Enter your password to continue."}),Object(E.jsx)(u.a,{margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0,onChange:p.handleChange,value:p.values.password,placeholder:"Your Password"})]}),Object(E.jsx)(Se.a,{children:Object(E.jsx)("button",{onClick:p.handleSubmit,className:"btn btn-outline-danger",children:"Confirm Delete"})})]}),d.map((function(e){return Object(E.jsx)(T,{message:e.message,type:e.type})}))]})]})}var Fe=function(){var e=Object(k.c)((function(e){return e.user})),t=Object(C.g)();return Object(E.jsxs)("div",{className:"container mt-3",children:[Object(E.jsx)("h1",{children:"Profile"}),Object(E.jsx)("hr",{}),Object(E.jsx)("h4",{children:"Username:"}),Object(E.jsx)("h5",{children:e.username}),Object(E.jsx)("h4",{children:"Email:"}),Object(E.jsx)("h5",{children:e.email}),Object(E.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return t.push("/change-password")},children:"Change Password"})]})},Pe=Object(p.a)((function(e){return{buttonProgress:{color:_.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonWrapper:{margin:e.spacing(1),position:"relative"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Le(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(C.g)(),s=Pe(),p=Object(a.useState)(!1),O=Object(r.a)(p,2),x=O[0],f=O[1],g=Object(i.a)({initialValues:{old_password:"",new_password1:"",new_password2:""},onSubmit:function(e){f(!0),console.log(e),w.post("auth/password/change/",e,{withCredentials:!0}).then((function(e){f(!1),console.clear(),o.push("/logout")})).catch((function(e){f(!1),console.log(e.response.data);var t=Object.entries(e.response.data)[0][1][0];console.log(t),c([{message:t,type:"danger"}])}))}});return Object(E.jsxs)(m.a,{component:"main",maxWidth:"xs",children:[Object(E.jsx)(d.a,{}),Object(E.jsxs)("div",{className:s.paper,children:[Object(E.jsx)(h.a,{component:"h1",variant:"h5",children:"Change Password"}),Object(E.jsxs)("form",{className:s.form,onSubmit:g.handleSubmit,children:[Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"old_password",label:"Old Password",name:"old_password",type:"password",onChange:g.handleChange,value:g.values.old_password,autoFocus:!0}),Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",label:"New Password",id:"new_password1",onChange:g.handleChange,value:g.values.new_password1,name:"new_password1"}),Object(E.jsx)(u.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",label:"Confirm New Password",id:"new_password2",onChange:g.handleChange,value:g.values.new_password2,name:"new_password2"}),Object(E.jsxs)("div",{className:s.buttonWrapper,children:[Object(E.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:x,className:s.submit,children:"Change Password"}),x&&Object(E.jsx)(N.a,{size:24,className:s.buttonProgress})]}),Object(E.jsx)(b.a,{container:!0,children:Object(E.jsx)(b.a,{item:!0,xs:!0,children:Object(E.jsx)(j.b,{href:"#",variant:"body2",children:"Forgot password?"})})})]})]}),n.map((function(e){return Object(E.jsx)(T,{message:e.message,type:e.type})}))]})}var Ue=localStorage.getItem("access_token"),Ve=JSON.parse(localStorage.getItem("user"));var Me=function(){var e=Object(k.b)();Ue&&(e({type:"TRUE"}),e(S(Ve)));var t=Object(k.c)((function(e){return e.authenticated}));return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsxs)(j.a,{children:[Object(E.jsx)(fe,{}),Object(E.jsx)(C.d,{children:Object(E.jsxs)("div",{className:"motherboard",children:[Object(E.jsx)(q,{path:"/logout",component:I}),Object(E.jsx)(C.b,{path:"/register",component:U}),Object(E.jsx)(C.b,{path:"/login",component:R}),Object(E.jsx)(C.b,{exact:!0,path:"/",children:t?Object(E.jsx)(C.a,{to:"/accounts"}):Object(E.jsx)(C.a,{to:"/login"})}),Object(E.jsx)(q,{exact:!0,path:"/accounts",component:X}),Object(E.jsx)(q,{exact:!0,path:"/manage/accounts",component:G}),Object(E.jsx)(q,{exact:!0,path:"/manage/accounts/:account_id",component:Be}),Object(E.jsx)(q,{exact:!0,path:"/create-account-book",component:H}),Object(E.jsx)(q,{path:"/accounts/:account_id",component:We}),Object(E.jsx)(q,{path:"/profile",component:Fe}),Object(E.jsx)(q,{path:"/change-password",component:Le})]})})]}),Object(E.jsx)(ke,{})]})},qe=n(71),Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRUE":return!0;case"FALSE":return!1;default:return e}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_TOKEN":return t.payload;case"REMOVE_TOKEN":return"";default:return e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_USER":return t.payload;case"REMOVE_USER":return{};default:return e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INSERT_BOOKS":return t.payload;case"REMOVE_BOOKS":return[];default:return e}},Xe=Object(qe.a)({authenticated:Ke,token:ze,user:Ye,account_books:Je}),Ge=Object(qe.b)(Xe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(E.jsx)(k.a,{store:Ge,children:Object(E.jsx)(Me,{})}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.ebcd25b3.chunk.js.map